<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>用户注册—购酒网</title>
		<link rel="shortcut icon" href="http://www.gjw.com/favicon.ico">
		<link rel="stylesheet" href="css/reset.css" />
		<link rel="stylesheet" href="css/index.css" />
		<link rel="stylesheet" href="css/iconfont.css" />
	</head>
	<body>
		<div class="login_head">
			<div class="wrap">
				<a href="javascript:;" class="logo">
					<img src="img/hd_logo.jpg" alt="" />
				</a>
				<div class="login_line r">
					<p>如您已有账户 
						<a href="login.html" style="color: #C40000;">请登录</a> 
						&nbsp;
						<i class="iconfont icon-ES-bangzhu" ></i>
						<a href="javascript:;">帮助 </a>
						&nbsp;
						<i class="iconfont icon-kefu pl_2" style="color: #C40000;"></i>
						<a href="javascript:;" style="color: #C40000;">在线帮助</a>
					</p>
				</div>
			</div>
			
		</div>
		<div class="login_contain">
			<div class="bg"></div>
			<div class="mid reg_mid">
				<div class="reg_box clear">
					<div class="tabForm">
						<ul class="tabFrom_nav">
							<li>
								<a href="javascript:;">
									<i class="mobileIcon icon"></i>
									手机注册
								</a>
								<div class="actBd"></div>
							</li>
							<li>
								<a href="javascript:;">
									<i class="malieIcon icon"></i>
									邮箱注册
								</a>
								<div class="actBd"></div>
							</li>
						</ul>
						<div class="formBox clear">
							<form action="" class="l">
								<div class="mgnAuto">
									<div class="text_box">
										<label for=""> 手机号 :</label>
	                                	<input type="text" class="phone">
	                            		<strong class="error">
	                            			<i class="errorImg"></i>
	                            			<b class="errorIcon">两次密码输入需一致</b>
	                            		</strong>
									</div>
									<div class="text_box" style="margin-top: 12px;">
										<label for="">设置密码 :</label>
										<input type="password" class="psw" placeholder="6-20个非空格字符 ">
	                            		<strong class="error">
	                            			<i class="errorImg"></i>
	                            			<b class="errorIcon">两次密码输入需一致</b>
	                            		</strong>
									</div>
									<div class="text_box">
										<label for=""> 确认密码:</label>
	                                	<input type="password" class="rePsw"/>
	                            		<strong class="error">
	                            			<i class="errorImg"></i>
	                            			<b class="errorIcon">两次密码输入需一致</b>
	                            		</strong>
									</div>
									<div class="mgTop12 codeBox clear">
		                                <div class="text_box  codeText_s l">
		                                    <label for="">验证码 :</label>
		                                    <input type="text" style="width:80px;">
		                                </div>
	                                	<span class="codeNum l">1875</span>
	                                	<a class="blue fl" href="javascript:;">换一张</a>
	                            	</div>
	                            	<div class="text_box mgTop12">
		                                <label for=""> 校验码 :</label>
		                                <a class="regCodeBtn btn">获取校验码</a> 
		                                <i class="mobileIcon"></i>
		                                <input type="text" class="codeText">
		                            </div>
		                            <p class="xieyi">点击注册，表示您同意购酒网 
		                            	<a class="blue" href="http://www.gjw.com/help/show-id-47.htm" target="_blank">《服务协议》</a>
		                            </p>
		                            <a href="javascript:;" class="regBtn">注册</a>
								</div>
							</form>
							<form action="" class="l">
								<div class="mgnAuto">
									<div class="text_box">
										<label for=""> <b class="red">*</b>邮箱 :</label>
	                                	<input type="text" class="maile">
	                            		<strong class="error">
	                            			<i class="errorImg"></i>
	                            			<b class="errorIcon">两次密码输入需一致</b>
	                            		</strong>
									</div>
									<div class="text_box" style="margin-top: 12px;">
										<label for=""><b class="red">*</b>设置密码 :</label><!--
	                                	--><input type="password" class="psw" placeholder="6-20个非空格字符 ">
	                            		<strong class="error">
	                            			<i class="errorImg"></i>
	                            			<b class="errorIcon">请输入正确的密码</b>
	                            		</strong>
									</div>
									<div class="text_box">
										<label for=""><b class="red">*</b>确认密码:</label>
	                                	<input type="password" class="rePsw"/>
	                            		<strong class="error">
	                            			<i class="errorImg"></i>
	                            			<b class="errorIcon">两次密码输入需一致</b>
	                            		</strong>
									</div>
									<div class="mgTop12 codeBox clear">
		                                <div class="text_box  codeText_s l">
		                                    <label for="">验证码 :</label>
		                                    <input type="text" style="width:80px";>
		                                </div>
	                                	<span class="codeNum l">1875</span>
	                                	<a class="blue fl" href="javascript:;">换一张</a>
	                            	</div>
	                            	<div class="text_box mgTop12">
		                                <label for=""> 校验码 :</label>
		                                <a class="regCodeBtn btn">获取校验码</a> 
		                                <i class="mobileIcon"></i>
		                                <input type="text" class="codeText">
		                            </div>
		                            <p class="xieyi">点击注册，表示您同意购酒网 
		                            	<a class="blue" href="http://www.gjw.com/help/show-id-47.htm" target="_blank">《服务协议》</a>
		                            </p>
		                            <a href="javascript:;" class="regBtn" disabled="false">注册</a>
								</div>
							</form>
						</div>
					</div>
					<a class="l adBox" href="index.html">
                        <img alt="周年庆" src="img/login1.jpg" >
					</a>
				</div>
			</div>
				
		</div>
		<div class="login_foot">
			<p class="link">
				<a href="javascript:;">关于我们</a>
				<span>|</span>
				<a href="javascript:;">联系我们</a>
				<span>|</span>
				<a href="javascript:;">人才招聘</a>
				<span>|</span>
				<a href="javascript:;">隐私声明</a>
				<span>|</span>
				<a href="javascript:;">帮助中心</a>
				<span>|</span>
				<a href="javascript:;">友情链接</a>
			</p>
			<p>Copyright©2009-2016 gjw.com, All Rights Reserved 上海购酒网电子商务有限公司 版权所有</p>
		</div>
		
		<script src="js/jquery.1.11.3.min.js"></script>
		<script>
			$(function(){
				//背景图片滚动
				var t = 0;
				setInterval(function(){
					t++;
					var height = $('.bg').height() - $('.bg').parent().height();
					if(t >= height){
						t = 0;
					}
					$('.bg').css({
						top: -t,
						left: -t
					});
				},80);
				
				//切换注册方式
				$('.tabFrom_nav>li').click(function(){
					var index = $(this).index();
					$(this).find('.actBd').show();
					$(this).siblings().find('.actBd').hide();
					$('.formBox').animate({
						left: -index*600
					},600);
				});
				//注册验证
				//随机生成验证码
				var reg = {
					code: $('.codeNum '),
					error: $('.error'),
					errorIcon: $('.errorIcon'),
					count: 0,
					init: function(){
						this.randomCode();
						this.blue();
						this.phone();
						this.psw();
						this.maile();
						this.rePsw();
						this.regCode();
						this.btn();
					},
					//随机生成验证码
					randomCode: function(){
						var num = parseInt( Math.random()*9000 ) + 1000;
						this.code.html(num);
					},
					//点击更换验证码
					blue: function(){
						var that = this;
						$('.blue').click(function(){
							that.randomCode();
						});
					},
					//验证手机号
					phone: function(){
						var reg = /^(136|177|130|150|180)\d{8}$/;
						this.reg($('.phone'),reg,'手机');
					},
					//验证密码
					psw: function(){
						var reg = /^\w{6,20}$/;
						this.reg($('.psw'),reg,'密码');
					},
					maile: function(){
						var reg = /^[a-z0-9]+\@[a-z0-9]+\.[a-z]{2,5}$/;
						this.reg($('.maile'),reg,'邮箱');
					},
					rePsw: function(){
						var that = this;
						$('.rePsw').blur(function(){
							var value = $(this).val();
							var v = $('.psw').val();
							if(value.length == 0){
								$(this).parent().attr('class','text_box');
								return;
							}
							if(value != v){
								$(this).next().find('.errorIcon').html('两次密码需一致');
								$(this).next().show();
								$(this).parent().attr('class','text_box outLIne');
								return;
							}
							$(this).parent().attr('class','text_box rightReg');
							$(this).next().show().attr('class','meetIcon').html('');
							that.count++;
						});
						//密码框，改变父框
						$('.rePsw').focus(function(){
							$(this).next().hide();
							$(this).parent().attr('class','text_box errBox');
						});
					},
					regCode: function(){
						var that = this;
						$('.codeText_s input').blur(function(){
							var value = $(this).val();
							var v = $('.codeNum').html();
							$(this).parent().attr('class','text_box codeText_s l');
							if(value.length == 0){
								return;
							}
							if(value != v && value.length != 0){
								alert('验证码输入不正确');
								that.randomCode();
								return;
							}
							$(this).parent().addClass('rightReg');
							that.count++;
						});
						$('.codeText_s input').focus(function(){
							$(this).parent().attr('class','text_box codeText_s l errBox');
						});
					},
					//封装的验证方法
					reg: function(input,regText,type){
						var that = this;
						input.blur(function(){
							var value = $(this).val();
							//手机号为空
							if(value.length == 0){
								$(this).next().find('.errorIcon').html('请输入'+type);
								$(this).next().show();
								$(this).parent().attr('class','text_box outLIne');
								return;
							}
							var reg = regText;
							if(!reg.test(value)){
								$(this).next().find('.errorIcon').html('请输入正确的'+type);
								$(this).next().show();
								$(this).parent().attr('class','text_box outLIne');
								return;
							}
							//验证成功的结果
							$(this).parent().attr('class','text_box rightReg');
							$(this).next().show().attr('class','meetIcon').html('');
							that.count++;
						});
						//号码框获焦，改变父框
						input.focus(function(){
							$(this).next().hide();
							$(this).parent().attr('class','text_box errBox');
							
						});
					},
					//点击注册
					btn: function(){
						var that = this;
						$('.regBtn:eq(0)').click(function(){
							var phoneV = $('.phone').val();
							var pswV = $('.psw').val();
							var rePswV = $('.rePsw').val();
							var codeV = $('.codeNum').val();
							var maileV = $('.maile').val();
							if(that.count >= 4) {
								if(confirm('注册成功，跳转至登录页面。')){
									location = 'login.html';
									return;
								}
							}
							if(phoneV.length == 0 || maileV.length == 0){
								alert('请输入手机号或邮箱');
								return;
							}
							if(pswV.length == 0){
								alert('密码不能为空');
								return;
							}
							if(rePswV.length == 0 ){
								alert('密码不能为空');
								return;
							}
							if(codeV.length == 0 ){
								alert('密码不能为空');
								return;
							}
							
						});
					}
				};
				reg.init();
			});
		</script>
	</body>
</html>
